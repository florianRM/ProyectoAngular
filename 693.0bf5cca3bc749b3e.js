"use strict";(self.webpackChunkProyectoAngular=self.webpackChunkProyectoAngular||[]).push([[693],{4693:(B,f,l)=>{l.r(f),l.d(f,{MypostsModule:()=>S});var p=l(6895),h=l(6585),t=l(1571),y=l(9019),C=l(529);let d=(()=>{class o{constructor(e){this.http=e,this.url=y.N.url}getMyposts(){return this.http.get(`${this.url}/myposts`)}uploadPost(e,n){const s=new FormData;return s.append("file",n,n.name),s.append("post",new Blob([JSON.stringify(e)],{type:"application/json"})),this.http.post(`${this.url}/posts/upload`,s)}deletePost(e){return this.http.delete(`${this.url}/post/delete/${e}`)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(C.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var _=l(5227),c=l(7340),r=l(433),P=l(5226),g=l.n(P),v=l(4655),u=l(3903);function x(o,i){if(1&o&&(t.TgZ(0,"option",24),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function M(o,i){if(1&o&&(t.TgZ(0,"div")(1,"span"),t._uU(2),t.qZA()()),2&o){const e=i.$implicit;t.xp6(2),t.Oqu(e)}}function b(o,i){1&o&&t._UZ(0,"i",25)}let Z=(()=>{class o{constructor(e,n,s,a){this.categoryService=e,this.fb=n,this.dialog=s,this.myPostService=a,this.myForm=this.fb.group({title:["",r.kI.required],description:[""],img:["",r.kI.required],categories:this.fb.array([],r.kI.required),fileSource:[""]}),this.newCategory=this.fb.control("",r.kI.required),this.categoriesForm=[],this.addedCategories=[],this.json={title:"",description:"",category:[]},this.uploaded=!1}ngOnInit(){this.categoryService.getCategories().subscribe({next:e=>this.categoriesForm=e})}get categories(){return this.myForm.get("categories")}addCategory(e){this.addedCategories.push(e.target.options[e.target.options.selectedIndex].text),this.categories.push(this.fb.control(this.newCategory.value,r.kI.required)),this.newCategory.reset()}onFileChange(e){this.file=e.target.files[0],this.myForm.patchValue({fileSource:this.file}),this.uploaded=!0}closeModal(){this.dialog.close()}uploadPost(){this.myForm.invalid&&this.myForm.markAllAsTouched(),this.json.title=this.myForm.get("title")?.value,this.json.description=this.myForm.get("description")?.value;const e=this.myForm.get("categories")?.value;for(let s=0;s<e.length;s++)this.json.category.push({id:e[s]});const n=this.myForm.get("fileSource")?.value;this.myPostService.uploadPost(this.json,n).subscribe({next:s=>{g().fire({icon:"success",title:"Successful Upload",text:`Image with name ${s.name} has been uploaded`,showConfirmButton:!0}).then(a=>{a.isConfirmed&&this.closeModal()})},error:s=>console.log(s)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v.H),t.Y36(r.qu),t.Y36(u.so),t.Y36(d))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-upload-post"]],decls:39,vars:6,consts:[[1,"mycontainer"],[1,"header"],[1,"title"],[1,"containerImg"],["enctype","multipart/form-data",3,"formGroup","ngSubmit"],[1,"form-group"],["for","title"],["type","text","name","titlePost","formControlName","title",1,"titlePost"],["for","description"],["name","description","cols","30","rows","5","formControlName","description",1,"description"],["for","category"],["name","category",1,"category",3,"formControl","change"],[3,"value",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"dropzone"],["type","file","id","fileDropRef","formControlName","img",3,"change"],["for","fileDropRef"],[1,"file"],[1,"info"],[1,"name"],["class","bi bi-check-lg",4,"ngIf"],[1,"formButtons"],["type","submit",1,"submitButton"],["type","button",1,"cancelButton",3,"click"],[3,"value"],[1,"bi","bi-check-lg"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),t._uU(4,"Upload Post"),t.qZA()()(),t.TgZ(5,"div",3)(6,"form",4),t.NdJ("ngSubmit",function(){return n.uploadPost()}),t.TgZ(7,"div",5)(8,"label",6),t._uU(9,"Title"),t.qZA(),t._UZ(10,"input",7),t.qZA(),t.TgZ(11,"div",5)(12,"label",8),t._uU(13,"Description"),t.qZA(),t._UZ(14,"textarea",9),t.qZA(),t.TgZ(15,"div",5)(16,"label",10),t._uU(17,"Category"),t.qZA(),t.TgZ(18,"select",11),t.NdJ("change",function(a){return n.addCategory(a)}),t.YNc(19,x,2,2,"option",12),t.qZA(),t.YNc(20,M,3,1,"div",13),t.qZA(),t.TgZ(21,"div",14)(22,"input",15),t.NdJ("change",function(a){return n.onFileChange(a)}),t.qZA(),t.TgZ(23,"h3"),t._uU(24,"Drag and drop file here"),t.qZA(),t.TgZ(25,"h3"),t._uU(26,"or"),t.qZA(),t.TgZ(27,"label",16),t._uU(28,"Browse for file"),t.qZA()(),t.TgZ(29,"div",17)(30,"div",18)(31,"h4",19),t.YNc(32,b,1,0,"i",20),t._uU(33),t.qZA()()(),t.TgZ(34,"div",21)(35,"button",22),t._uU(36,"Upload"),t.qZA(),t.TgZ(37,"button",23),t.NdJ("click",function(){return n.closeModal()}),t._uU(38,"Cancel"),t.qZA()()()()()),2&e&&(t.xp6(6),t.Q6J("formGroup",n.myForm),t.xp6(12),t.Q6J("formControl",n.newCategory),t.xp6(1),t.Q6J("ngForOf",n.categoriesForm),t.xp6(1),t.Q6J("ngForOf",n.addedCategories),t.xp6(12),t.Q6J("ngIf",n.uploaded),t.xp6(1),t.hij("",null==n.file?null:n.file.name," "))},dependencies:[p.sg,p.O5,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.oH,r.sg,r.u],styles:[".mycontainer[_ngcontent-%COMP%]{position:relative;z-index:2;overflow:hidden}.bi-x-circle[_ngcontent-%COMP%]{font-size:24px}.header[_ngcontent-%COMP%]{display:flex;justify-content:center}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:10px}.dropzone[_ngcontent-%COMP%]{width:450px;height:200px;padding:2rem;text-align:center;border:dashed 1px #979797;position:relative;margin:O auto}.dropzone[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:2;width:100%;height:100%;top:0;left:0}.dropzone[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;border-radius:5px;background-color:#4473ff;padding:10px}.bi-check-lg[_ngcontent-%COMP%]{color:green;font-size:20px}.dropzone[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#38424c}.file[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-weight:700;font-size:16px}.formButtons[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:20px;margin:0}.formButtons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:7px 20px;margin:0 0 0 25px;border:none;border-radius:5px;color:#fff}.formButtons[_ngcontent-%COMP%]   .submitButton[_ngcontent-%COMP%]{background-color:green}.formButtons[_ngcontent-%COMP%]   .cancelButton[_ngcontent-%COMP%]{background-color:red}"]}),o})();function O(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",6),t.NdJ("mouseenter",function(){const a=t.CHM(e).index,m=t.oxw();return t.KtG(m.changeState(a))})("mouseleave",function(){const a=t.CHM(e).index,m=t.oxw();return t.KtG(m.changeState(a))}),t.TgZ(1,"div",7)(2,"div",8),t._UZ(3,"img",9),t.qZA()(),t.TgZ(4,"div",10)(5,"ul")(6,"li"),t._UZ(7,"i",11),t.qZA(),t.TgZ(8,"li"),t._UZ(9,"i",12),t.qZA(),t.TgZ(10,"li"),t._UZ(11,"i",13),t.qZA(),t.TgZ(12,"li"),t._UZ(13,"i",14),t.qZA()()()()}if(2&o){const e=i.$implicit,n=i.index,s=t.oxw();t.xp6(3),t.Q6J("src",e.img,t.LSH),t.xp6(1),t.Q6J("@visibleIcons",s.state[n])}}let T=(()=>{class o{constructor(e,n){this.dialog=e,this.myPostService=n,this.posts=[],this.postsLength=0,this.state=[]}ngOnInit(){for(let e=0;e<this.postsLength;e++)this.state.push("close")}openDialogUpload(){this.dialog.open(Z,{disableClose:!0})}changeState(e){this.state[e]="close"===this.state[e]?"open":"close"}deletePost(e){this.myPostService.deletePost(e).subscribe({next:()=>{g().fire({title:"Delete post",icon:"warning",text:"Are you sure to delete this post?",showCloseButton:!0,showConfirmButton:!0,confirmButtonText:"Delete",confirmButtonColor:"red"}).then(n=>{n.isConfirmed&&g().fire({title:"Successfully",text:"The post has been deleted successfully",showCancelButton:!0,showConfirmButton:!1})})}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.uw),t.Y36(d))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-post-gallery"]],inputs:{posts:"posts",postsLength:"postsLength"},decls:6,vars:1,consts:[[1,"row"],[1,"column"],[1,"add_post"],[1,"blur_background"],["data-toggle","tooltip","data-placement","bottom","title","Add Post",1,"bi","bi-plus-square",3,"click"],["class","column",3,"mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"column",3,"mouseenter","mouseleave"],[1,"gallery-container"],[1,"image"],[3,"src"],[1,"post_icons"],[1,"bi","bi-heart"],[1,"bi","bi-chat"],[1,"bi","bi-trash3-fill","text-danger"],[1,"bi","bi-pencil"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"div",3),t.TgZ(4,"i",4),t.NdJ("click",function(){return n.openDialogUpload()}),t.qZA()()(),t.YNc(5,O,14,2,"div",5),t.qZA()),2&e&&(t.xp6(5),t.Q6J("ngForOf",n.posts))},dependencies:[p.sg],styles:[".row[_ngcontent-%COMP%]{display:flex;margin:5px;flex-wrap:wrap}.column[_ngcontent-%COMP%]{flex-basis:33.3%;padding:5px}.add_post[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;width:100%;height:88%}.blur_background[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#bbb;filter:blur(5px);z-index:-1}.bi-plus-square[_ngcontent-%COMP%]{z-index:111;font-size:2.2em;cursor:pointer}.imgcontainer[_ngcontent-%COMP%]{position:relative;top:0;z-index:1}.image[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}img[_ngcontent-%COMP%]{border-radius:4px;width:100%;height:100%;object-fit:cover}.post_icons[_ngcontent-%COMP%]{position:relative;z-index:-999}.post_icons[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{display:flex;justify-content:center;list-style:none;margin:10px 0 0;padding:0}.post_icons[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:copy;font-size:20px;margin-right:20px}@media only screen and (max-width:480px){.column[_ngcontent-%COMP%]{flex-basis:100%}.add_post[_ngcontent-%COMP%]{height:12.4475em}}@media only screen and (min-width: 481px) and (max-width:801px){.column[_ngcontent-%COMP%]{flex-basis:50%}}"],data:{animation:[(0,c.X$)("visibleIcons",[(0,c.SB)("open",(0,c.oB)({transform:"translateY(0px)"})),(0,c.SB)("close",(0,c.oB)({transform:"translateY(-40px)"})),(0,c.eR)("open<=>close",(0,c.jt)("150ms"))])]}}),o})();function U(o,i){if(1&o&&(t.TgZ(0,"div",5),t._UZ(1,"app-post-gallery",6),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("posts",e.myPosts)("postsLength",e.myPosts.length)}}const A=[{path:"",component:(()=>{class o{constructor(e){this.myPostService=e,this.myPosts=[]}ngOnInit(){this.getMyPosts()}getMyPosts(){this.myPostService.getMyposts().subscribe({next:e=>this.myPosts=e,error:e=>console.log(e)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-mypost"]],decls:7,vars:1,consts:[[1,"mycontainer"],[1,"d-flex","justify-content-center"],["class","postcontainer",4,"ngIf"],[1,"container_footer"],[1,"footer"],[1,"postcontainer"],[3,"posts","postsLength"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3"),t._uU(3,"My Posts"),t.qZA()(),t.YNc(4,U,2,2,"div",2),t.TgZ(5,"div",3),t._UZ(6,"app-footer",4),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("ngIf",n.myPosts.length))},dependencies:[p.O5,_.c,T],styles:[".mycontainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.postcontainer[_ngcontent-%COMP%]{flex:1}.container_footer[_ngcontent-%COMP%]{display:flex;justify-content:center}.footer[_ngcontent-%COMP%]{width:70%}"]}),o})()}];let F=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[h.Bz.forChild(A),h.Bz]}),o})();var w=l(4466);let S=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[p.ez,F,w.m,u.Is,r.UX]}),o})()}}]);