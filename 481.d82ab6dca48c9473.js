"use strict";(self.webpackChunkProyectoAngular=self.webpackChunkProyectoAngular||[]).push([[481],{5481:(N,g,i)=>{i.r(g),i.d(g,{CategoryModule:()=>O});var u=i(4755),m=i(6868),f=i(5226),l=i.n(f),a=i(5030),t=i(2223),C=i(4655),h=i(9758),d=i(7914),y=i(805),p=i(1493);function _(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"div",14)(1,"button",15),t.NdJ("click",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.changeDisplay())}),t._uU(2,"Add Category"),t.qZA()()}}function x(e,r){1&e&&(t.TgZ(0,"th"),t._uU(1,"Delete"),t.qZA())}function v(e,r){if(1&e&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Id"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Name"),t.qZA(),t.YNc(5,x,2,0,"th",16),t.qZA()),2&e){const o=t.oxw();t.xp6(5),t.Q6J("ngIf",o.user&&"ADMIN"==o.user.role)}}function T(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"td")(1,"i",17),t.NdJ("click",function(){t.CHM(o);const s=t.oxw().$implicit,c=t.oxw();return t.KtG(c.deleteCategory(s.id))}),t.qZA()()}}function b(e,r){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.YNc(5,T,2,0,"td",16),t.qZA()),2&e){const o=r.$implicit,n=t.oxw();t.xp6(2),t.hij(" ",o.id," "),t.xp6(2),t.hij(" ",o.name," "),t.xp6(1),t.Q6J("ngIf",n.user&&"ADMIN"==n.user.role)}}function Z(e,r){1&e&&(t.TgZ(0,"div",18)(1,"h3"),t._uU(2,"Add Category"),t.qZA()())}function A(e,r){1&e&&(t.TgZ(0,"small",19),t._uU(1,"Name is required"),t.qZA())}const M=function(){return[5,10,15,20]},P=[{path:"",component:(()=>{class e{constructor(o,n,s){this.categoryService=o,this.fb=n,this.authService=s,this.totalRecords=0,this.display=!1,this.myForm=this.fb.group({name:["",[a.kI.required,a.kI.minLength(3)]]}),this.cols=[]}ngOnInit(){this.user=this.authService.user,this.categoryService.getCategories().subscribe({next:o=>{this.totalRecords=o.length,this.categories=o}})}changeDisplay(){this.display=!this.display}isValidName(){return this.myForm.controls.name.invalid&&this.myForm.controls.name.touched}addCategory(){this.display=!1,this.myForm.invalid?this.myForm.markAllAsTouched():this.categoryService.addCategory(this.myForm.value).subscribe({next:()=>{l().fire({title:"Successfully",text:"The category has been added successfully",showCancelButton:!0,showConfirmButton:!1}),this.ngOnInit()},error:o=>{l().fire({title:"Error ocurred",text:o.error.message,showCancelButton:!0,showConfirmButton:!1})}})}deleteCategory(o){l().fire({title:"Delete category",icon:"warning",text:"Are you sure to delete this category?",showCloseButton:!0,showConfirmButton:!0,confirmButtonText:"Delete",confirmButtonColor:"red"}).then(n=>{n.isConfirmed&&this.categoryService.deleteCategory(o).subscribe({next:()=>{l().fire({title:"Successfully",text:"The category has been deleted successfully",showCancelButton:!0,showConfirmButton:!1}),this.ngOnInit()}})})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(C.H),t.Y36(a.qu),t.Y36(h.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-categories"]],decls:20,vars:11,consts:[[1,"title"],["class","addCategory",4,"ngIf"],[3,"value","paginator","rows","rowsPerPageOptions","totalRecords","pageLinks"],["pTemplate","header"],["pTemplate","body"],[3,"visible","visibleChange"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","title"],["type","text","name","titlePost","formControlName","name",1,"titlePost"],["class","errorHelper",4,"ngIf"],[1,"formButtons"],["type","submit",1,"submitButton"],["type","button",1,"cancelButton",3,"click"],[1,"addCategory"],[3,"click"],[4,"ngIf"],[1,"bi","bi-trash3-fill","text-danger",3,"click"],[1,"dialogTitle"],[1,"errorHelper"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2,"Categories"),t.qZA()(),t.YNc(3,_,3,0,"div",1),t.TgZ(4,"p-table",2),t.YNc(5,v,6,1,"ng-template",3),t.YNc(6,b,6,3,"ng-template",4),t.qZA(),t.TgZ(7,"p-dialog",5),t.NdJ("visibleChange",function(c){return n.display=c}),t.YNc(8,Z,3,0,"ng-template",3),t.TgZ(9,"form",6),t.NdJ("ngSubmit",function(){return n.addCategory()}),t.TgZ(10,"div",7)(11,"label",8),t._uU(12,"Name"),t.qZA(),t._UZ(13,"input",9),t.YNc(14,A,2,0,"small",10),t.qZA(),t.TgZ(15,"div",11)(16,"button",12),t._uU(17,"Add"),t.qZA(),t.TgZ(18,"button",13),t.NdJ("click",function(){return n.changeDisplay()}),t._uU(19,"Cancel"),t.qZA()()()()),2&o&&(t.xp6(3),t.Q6J("ngIf",n.user&&"ADMIN"==n.user.role),t.xp6(1),t.Q6J("value",n.categories)("paginator",!0)("rows",5)("rowsPerPageOptions",t.DdM(10,M))("totalRecords",n.totalRecords)("pageLinks",3),t.xp6(3),t.Q6J("visible",n.display),t.xp6(2),t.Q6J("formGroup",n.myForm),t.xp6(5),t.Q6J("ngIf",n.isValidName()))},dependencies:[u.O5,d.iA,y.jx,p.V,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:[".title[_ngcontent-%COMP%]{text-align:center}.title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:5px;font-size:1.8em}.addCategory[_ngcontent-%COMP%]{padding:10px}.addCategory[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;border-radius:4px;color:#fff;background-color:#4473ff;padding:4px}i[_ngcontent-%COMP%]{cursor:pointer;font-size:20px;margin-right:20px}.dialogTitle[_ngcontent-%COMP%]{text-align:center}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:10px}.formButtons[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:20px;margin:0}.formButtons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:7px 20px;margin:0 0 0 25px;border:none;border-radius:5px;color:#fff}.formButtons[_ngcontent-%COMP%]   .submitButton[_ngcontent-%COMP%]{background-color:green}.formButtons[_ngcontent-%COMP%]   .cancelButton[_ngcontent-%COMP%]{background-color:red}.errorHelper[_ngcontent-%COMP%]{color:red}"]}),e})()}];let B=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.Bz.forChild(P),m.Bz]}),e})(),O=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.ez,B,d.U$,p.S,a.UX,a.u5]}),e})()}}]);